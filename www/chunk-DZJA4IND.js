import{a as L}from"./chunk-7VMTDOT5.js";import{a as $}from"./chunk-2LGJXZ3K.js";import{a as U,e as A}from"./chunk-IRLUNMRX.js";import"./chunk-XQFBF7XZ.js";import{D as Q}from"./chunk-F5AVIJ4I.js";import{b as y,c as S,d as I,e as w,f as E,g as k,h as z,i as F,j as T,k as B,l as D,n as j,q as H,r as N,u as R}from"./chunk-LOSME26X.js";import{Ca as b,I as _,J as i,L as x,N as u,R as P,U as d,V as t,W as n,X as l,ca as M,la as o,ma as g,na as h,oa as C,ua as O,za as v}from"./chunk-IJPQUT22.js";import"./chunk-4WFVMWDK.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-ES7SHQTL.js";import"./chunk-ABTDBHFV.js";import"./chunk-5Y22IS3P.js";import"./chunk-CFCTAWCC.js";import"./chunk-UQSJFG5S.js";import"./chunk-LRFGNCHE.js";import"./chunk-M2X7KQLB.js";import"./chunk-GIP4FLTX.js";import"./chunk-42C7ZIID.js";import"./chunk-OZYWYLNK.js";import{f}from"./chunk-D7YYRZS5.js";var m=L("BarcodeScanner",{web:()=>import("./chunk-HEIH4AWV.js").then(a=>new a.BarcodeScannerWeb)});function q(a,c){if(a&1&&(t(0,"ion-card",15),l(1,"img",16),t(2,"ion-card-header")(3,"ion-card-title"),o(4),n(),t(5,"ion-card-subtitle"),l(6,"ion-icon",17),o(7),n(),t(8,"p",18),o(9),n()(),t(10,"ion-card-content"),l(11,"ion-progress-bar",9),t(12,"p",19),o(13),n(),l(14,"ion-icon",20),n()()),a&2){let r=c.$implicit;i(),d("alt",O(r.name))("src",r.image,_),i(3),g(r.name),i(3),h(" ",r.address," "),i(2),g(r.nextReward),i(2),d("value",r.currentPoints/r.totalPoints),i(2),C("",r.currentPoints," / ",r.totalPoints),i(),d("name",r.icon)}}function V(a,c){if(a&1&&(t(0,"ion-item")(1,"ion-label"),o(2),n()()),a&2){let r=c.$implicit;i(2),g(r)}}var at=(()=>{let c=class c{constructor(s,e){this.userService=s,this.auth=e,this.userName="Invitado",this.uid="",this.totalPoints=0,this.totalPointsMax=500,this.totalPointsProgress=0,this.favorites=[],this.tips=[],U({scan:A})}ngOnInit(){this.auth.onAuthStateChanged(s=>{s&&(this.uid=s.uid,this.userName=s.displayName||s.email?.split("@")[0]||"Usuario",this.userService.getUserData().subscribe(e=>{e&&(this.totalPoints=e.points||0,this.totalPointsMax=500,this.totalPointsProgress=this.totalPoints/this.totalPointsMax,this.favorites=e.favorites||[],this.tips=e.tips||[])}))})}checkPermission(){return f(this,null,function*(){return(yield m.checkPermission({force:!0})).granted?!0:(console.log("Permiso denegado"),!1)})}scanTicket(){return f(this,null,function*(){if(yield this.checkPermission())try{yield m.hideBackground();let e=yield m.startScan();e.hasContent?(console.log("QR detectado:",e.content),alert("QR detectado: "+e.content)):console.log("Escaneo cancelado")}catch(e){console.error("Error escaneando QR",e)}finally{m.showBackground()}})}};c.\u0275fac=function(e){return new(e||c)(x($),x(Q))},c.\u0275cmp=u({type:c,selectors:[["app-home"]],decls:33,vars:6,consts:[["color","primary"],[1,"ion-text-center"],["fullscreen","",1,"home-content"],[1,"greeting"],[1,"scan-container"],["name","scan",1,"scan-icon"],["expand","block",1,"scan-btn",3,"click"],["slot","start","name","qr-code-outline"],[1,"total-points"],[3,"value"],[1,"favorites-header"],["href","#"],["class","favorite-card",4,"ngFor","ngForOf"],[1,"tips"],[4,"ngFor","ngForOf"],[1,"favorite-card"],[3,"src","alt"],["name","location-outline"],[1,"reward"],[1,"points"],[1,"category-icon",3,"name"]],template:function(e,p){e&1&&(t(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),o(3,"FidelyApp \u{1F37D}\uFE0F"),n()()(),t(4,"ion-content",2)(5,"div",3)(6,"h1"),o(7),n(),t(8,"p"),o(9,"Descubre tus recompensas favoritas"),n()(),t(10,"div",4),l(11,"ion-icon",5),t(12,"p"),o(13,"Toca para escanear tu c\xF3digo"),n()(),t(14,"ion-button",6),M("click",function(){return p.scanTicket()}),l(15,"ion-icon",7),o(16," Escanear QR "),n(),t(17,"div",8),l(18,"ion-progress-bar",9),t(19,"p"),o(20),n()(),t(21,"div",10)(22,"h2"),o(23,"Negocios favoritos"),n(),t(24,"a",11),o(25,"Ver todos"),n()(),t(26,"ion-list"),P(27,q,15,10,"ion-card",12),n(),t(28,"div",13)(29,"h3"),o(30,"Consejos"),n(),t(31,"ion-list"),P(32,V,3,1,"ion-item",14),n()()()),e&2&&(i(7),h("\xA1Hola, ",p.userName,"!"),i(11),d("value",p.totalPointsProgress),i(2),C("",p.totalPoints," / ",p.totalPointsMax," puntos acumulados"),i(7),d("ngForOf",p.favorites),i(5),d("ngForOf",p.tips))},dependencies:[b,v,F,N,H,z,y,R,j,D,T,B,S,w,k,E,I],styles:['@charset "UTF-8";.home-content[_ngcontent-%COMP%]{--background: #f5f7fa;min-height:100vh;padding:0;margin:0;display:flex;flex-direction:column}ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background:var(--ion-color-primary)}.greeting[_ngcontent-%COMP%]{margin:16px}.greeting[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:26px;font-weight:800;color:#222;margin-bottom:4px}.greeting[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#666;margin:0}.scan-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:30px 0}.scan-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:12px;font-size:16px;font-weight:700;color:var(--ion-color-primary)}.scan-icon[_ngcontent-%COMP%]{font-size:120px;color:var(--ion-color-primary);animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:.7}50%{transform:scale(1.2);opacity:1}to{transform:scale(1);opacity:.7}}.scan-btn[_ngcontent-%COMP%]{margin:10px 16px;height:48px;font-weight:700;border-radius:14px}.total-points[_ngcontent-%COMP%]{padding:0 16px;margin-top:10px}.total-points[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{border-radius:8px;height:10px}.total-points[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:6px;text-align:center;font-size:14px;color:#333}.favorites-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px}.favorites-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#222}.favorites-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-primary);text-decoration:none}.favorite-card[_ngcontent-%COMP%]{margin:0 16px 16px;border-radius:18px;overflow:hidden;background:#fff;box-shadow:0 4px 12px #00000014;border:1px solid #e3e3e3}.favorite-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover}.favorite-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:12px 14px}.favorite-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#222}.favorite-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:4px;font-size:14px;color:#777}.favorite-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:4px}.favorite-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .reward[_ngcontent-%COMP%]{margin-top:6px;font-size:14px;font-weight:600;color:var(--ion-color-primary)}.favorite-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:10px 14px}.favorite-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{height:8px;border-radius:6px}.favorite-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{margin-top:6px;font-size:13px;text-align:right;color:#444}.favorite-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{font-size:26px;margin-top:8px;color:var(--ion-color-primary)}.tips[_ngcontent-%COMP%]{padding:16px}.tips[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:12px;color:#222}.tips[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #fff;border-radius:14px;margin-bottom:10px;box-shadow:0 2px 8px #0000000d}.tips[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:#444}']});let a=c;return a})();export{at as HomeComponent};
