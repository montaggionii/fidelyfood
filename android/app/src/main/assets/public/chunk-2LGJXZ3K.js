import{a as m,c as D,d as w,e as o,f as y,h as u,i as r}from"./chunk-XQFBF7XZ.js";import{D as h}from"./chunk-F5AVIJ4I.js";import{a as p,q as d,t as c}from"./chunk-IJPQUT22.js";import{f as a}from"./chunk-D7YYRZS5.js";var A=(()=>{let i=class i{constructor(t,e){this.firestore=t,this.auth=e}getUserData(){return new p(t=>{this.auth.onAuthStateChanged(e=>a(this,null,function*(){if(e){let s=o(this.firestore,`users/${e.uid}`),l=yield y(s);if(l.exists())t.next(l.data());else{let f={favorites:[],points:0,tips:[],email:e.email||"",name:e.displayName||""};yield u(s,f),t.next(f)}}else t.next(null)}))})}getAllUsers(){let t=w(this.firestore,"users");return D(t,{idField:"uid"})}updatePoints(t,e){return a(this,null,function*(){let s=o(this.firestore,`users/${t}`);yield r(s,{points:e})})}updateFavorites(t,e){return a(this,null,function*(){let s=o(this.firestore,`users/${t}`);yield r(s,{favorites:e})})}updateTips(t,e){return a(this,null,function*(){let s=o(this.firestore,`users/${t}`);yield r(s,{tips:e})})}createUser(t,e){return a(this,null,function*(){let s=o(this.firestore,`users/${t}`);yield u(s,e)})}};i.\u0275fac=function(e){return new(e||i)(c(m),c(h))},i.\u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();export{A as a};
