import{a as U}from"./chunk-2H5N2EFA.js";import"./chunk-F5AVIJ4I.js";import{b as O,h as W,i as F,j as k,k as V,m as N,q as j,r as H,v as R}from"./chunk-LOSME26X.js";import{Aa as S,Ca as y,J as i,Ja as E,L as v,N as I,R as f,Ra as L,Sa as B,U as m,V as o,Va as A,W as r,ba as x,ca as c,da as u,ka as w,la as l,ma as b,na as T,ra as M,sa as C,ta as P,y as h,z as _}from"./chunk-IJPQUT22.js";import"./chunk-4WFVMWDK.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-ES7SHQTL.js";import"./chunk-ABTDBHFV.js";import"./chunk-5Y22IS3P.js";import"./chunk-CFCTAWCC.js";import"./chunk-UQSJFG5S.js";import"./chunk-LRFGNCHE.js";import"./chunk-M2X7KQLB.js";import"./chunk-GIP4FLTX.js";import"./chunk-42C7ZIID.js";import"./chunk-OZYWYLNK.js";import"./chunk-D7YYRZS5.js";function z(n,d){if(n&1){let s=x();o(0,"ion-item")(1,"ion-label",6),l(2,"Nombre"),r(),o(3,"ion-input",13),P("ngModelChange",function(t){h(s);let e=u();return C(e.name,t)||(e.name=t),_(t)}),c("ionBlur",function(){h(s);let t=u();return _(t.nameTouched=!0)}),r()()}if(n&2){let s=u();w("invalid",s.nameTouched&&!s.name),i(3),M("ngModel",s.name)}}function D(n,d){n&1&&(o(0,"ion-note",14),l(1," El nombre es obligatorio "),r())}function Y(n,d){n&1&&(o(0,"ion-note",14),l(1," El email es obligatorio "),r())}function q(n,d){n&1&&(o(0,"ion-note",14),l(1," La contrase\xF1a debe tener al menos 6 caracteres "),r())}function G(n,d){if(n&1){let s=x();o(0,"ion-item")(1,"ion-label",6),l(2,"Repetir contrase\xF1a"),r(),o(3,"ion-input",8),P("ngModelChange",function(t){h(s);let e=u();return C(e.confirmPassword,t)||(e.confirmPassword=t),_(t)}),c("ionBlur",function(){h(s);let t=u();return _(t.confirmTouched=!0)}),r()()}if(n&2){let s=u();w("invalid",s.confirmTouched&&s.confirmPassword!==s.password),i(3),M("ngModel",s.confirmPassword)}}function J(n,d){n&1&&(o(0,"ion-note",14),l(1," Las contrase\xF1as no coinciden "),r())}function K(n,d){if(n&1&&(o(0,"p",15),l(1),r()),n&2){let s=u();i(),b(s.errorMsg)}}var oe=(()=>{let d=class d{constructor(a,t){this.authService=a,this.router=t,this.email="",this.password="",this.confirmPassword="",this.name="",this.loading=!1,this.errorMsg="",this.isLoginMode=!0,this.splash=!0,this.nameTouched=!1,this.emailTouched=!1,this.passwordTouched=!1,this.confirmTouched=!1}ngOnInit(){setTimeout(()=>this.splash=!1,1500),this.authService.user$.subscribe(a=>{if(a){let t=this.authService.getUserName(a);alert(`\xA1Hola, ${t}!`),this.router.navigate(["/tabs/home"])}})}toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMsg="",this.nameTouched=!1,this.emailTouched=!1,this.passwordTouched=!1,this.confirmTouched=!1}submit(){if(this.errorMsg="",this.loading=!0,this.isLoginMode)this.authService.login({email:this.email,password:this.password}).subscribe({next:a=>{this.loading=!1;let t=this.authService.getUserName(a);alert(`\xA1Hola, ${t}!`),this.router.navigate(["/tabs/home"])},error:a=>{this.loading=!1,this.errorMsg=a.message||"Error al iniciar sesi\xF3n"}});else{if(this.password!==this.confirmPassword){this.errorMsg="Las contrase\xF1as no coinciden",this.loading=!1;return}this.authService.register({name:this.name,email:this.email,password:this.password}).subscribe({next:a=>{this.loading=!1;let t=this.authService.getUserName(a);alert(`\xA1Bienvenido, ${t}!`),this.router.navigate(["/tabs/home"])},error:a=>{this.loading=!1,this.errorMsg=a.message||"Error al crear cuenta"}})}}};d.\u0275fac=function(t){return new(t||d)(v(U),v(E))},d.\u0275cmp=I({type:d,selectors:[["app-auth"]],decls:30,vars:19,consts:[[1,"auth-content"],[1,"auth-wrapper"],[1,"splash"],[1,"auth-form"],[3,"invalid",4,"ngIf"],["color","danger",4,"ngIf"],["position","floating"],["type","email",3,"ngModelChange","ionBlur","ngModel"],["type","password",3,"ngModelChange","ionBlur","ngModel"],["expand","block",3,"click","disabled"],[1,"toggle-text"],[1,"link-button",3,"click"],["class","error-msg",4,"ngIf"],[3,"ngModelChange","ionBlur","ngModel"],["color","danger"],[1,"error-msg"]],template:function(t,e){t&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),l(3),r()()(),o(4,"ion-content",0)(5,"div",1)(6,"h2",2),l(7),r(),o(8,"div",3),f(9,z,4,3,"ion-item",4)(10,D,2,0,"ion-note",5),o(11,"ion-item")(12,"ion-label",6),l(13,"Email"),r(),o(14,"ion-input",7),P("ngModelChange",function(g){return C(e.email,g)||(e.email=g),g}),c("ionBlur",function(){return e.emailTouched=!0}),r()(),f(15,Y,2,0,"ion-note",5),o(16,"ion-item")(17,"ion-label",6),l(18,"Contrase\xF1a"),r(),o(19,"ion-input",8),P("ngModelChange",function(g){return C(e.password,g)||(e.password=g),g}),c("ionBlur",function(){return e.passwordTouched=!0}),r()(),f(20,q,2,0,"ion-note",5)(21,G,4,3,"ion-item",4)(22,J,2,0,"ion-note",5),o(23,"ion-button",9),c("click",function(){return e.submit()}),l(24),r(),o(25,"p",10),l(26),o(27,"button",11),c("click",function(){return e.toggleMode()}),l(28),r()(),f(29,K,2,1,"p",12),r()()()),t&2&&(i(3),b(e.isLoginMode?"Iniciar Sesi\xF3n":"Crear Cuenta"),i(4),b(e.isLoginMode?"Iniciar Sesi\xF3n":"Crear Cuenta"),i(2),m("ngIf",!e.isLoginMode),i(),m("ngIf",!e.isLoginMode&&e.nameTouched&&!e.name),i(),w("invalid",e.emailTouched&&!e.email),i(3),M("ngModel",e.email),i(),m("ngIf",e.emailTouched&&!e.email),i(),w("invalid",e.passwordTouched&&(!e.password||e.password.length<6)),i(3),M("ngModel",e.password),i(),m("ngIf",e.passwordTouched&&e.password&&e.password.length<6),i(),m("ngIf",!e.isLoginMode),i(),m("ngIf",!e.isLoginMode&&e.confirmTouched&&e.confirmPassword!==e.password),i(),m("disabled",e.loading),i(),T(" ",e.loading?"Cargando...":e.isLoginMode?"Entrar":"Registrarme"," "),i(2),T(" ",e.isLoginMode?"\xBFNo tienes cuenta?":"\xBFYa tienes cuenta?"," "),i(2),T(" ",e.isLoginMode?"Crear cuenta":"Iniciar sesi\xF3n"," "),i(),m("ngIf",e.errorMsg))},dependencies:[N,y,S,A,L,B,R,O,V,k,F,H,j,W],styles:[".auth-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;--padding-top: 0;--padding-bottom: 0}.auth-wrapper[_ngcontent-%COMP%]{width:100%;max-width:400px;display:flex;flex-direction:column;align-items:center;margin-top:50px}.splash[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#3880ff;text-align:center;margin-bottom:20px}.auth-form[_ngcontent-%COMP%]{width:100%}.auth-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:15px}.error-msg[_ngcontent-%COMP%]{color:red;text-align:center;margin-top:10px}.toggle-text[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.link-button[_ngcontent-%COMP%]{background:none;border:none;color:#3880ff;cursor:pointer;font-weight:700;padding:0}.invalid[_ngcontent-%COMP%]{--highlight-color-focused: #f44336 !important;--border-color: #f44336 !important;--border-width: 2px}ion-note[_ngcontent-%COMP%]{margin-left:16px;font-size:13px}"]});let n=d;return n})();export{oe as AuthPage};
