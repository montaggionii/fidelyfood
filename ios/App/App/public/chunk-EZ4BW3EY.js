import{b as f,c as M,d as v,e as I,g as w}from"./chunk-2B3GL74U.js";import{Ca as u,Ea as g,L as l,N as m,V as a,W as r,X as d,la as h,q as p,t as c}from"./chunk-IJPQUT22.js";import"./chunk-DCRF5AID.js";import"./chunk-QUJFQN2Y.js";import"./chunk-BVXB5QV7.js";import"./chunk-QBOB4VDW.js";import"./chunk-O7GQPN7M.js";import"./chunk-BYMGTA2M.js";import"./chunk-GMPTDLTW.js";import"./chunk-CQHXSX3F.js";import"./chunk-Z4RK6FP3.js";import"./chunk-6JCCXOKU.js";import"./chunk-ABTDBHFV.js";import"./chunk-5Y22IS3P.js";import"./chunk-CFCTAWCC.js";import"./chunk-UQSJFG5S.js";import"./chunk-LRFGNCHE.js";import"./chunk-M2X7KQLB.js";import"./chunk-GIP4FLTX.js";import"./chunk-42C7ZIID.js";import"./chunk-OZYWYLNK.js";import"./chunk-RDYOYA6T.js";import"./chunk-ZBB7PO7E.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BGW6FU6U.js";import"./chunk-CKP3SGE2.js";import"./chunk-DOLSMZFS.js";import"./chunk-D7YYRZS5.js";var k=(()=>{let e=class e{constructor(t){this.http=t,this.apiUrl="http://localhost:3000/restaurants"}getRestaurants(){return this.http.get(this.apiUrl)}};e.\u0275fac=function(o){return new(o||e)(c(g))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var H=(()=>{let e=class e{constructor(t){this.restaurantService=t,this.restaurants=[]}ngOnInit(){this.loadRestaurants()}ngAfterViewInit(){this.initMap()}initMap(){let t={lat:39.4699,lng:-.3763},o=document.getElementById("map");this.map=new google.maps.Map(o,{center:t,zoom:14}),navigator.geolocation?navigator.geolocation.getCurrentPosition(n=>{let s={lat:n.coords.latitude,lng:n.coords.longitude};this.map.setCenter(s),new google.maps.Marker({position:s,map:this.map,title:"Est\xE1s aqu\xED \u{1F9CD}\u200D\u2642\uFE0F",icon:{url:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"}}),this.addMarkers()},()=>{console.warn("No se pudo obtener la ubicaci\xF3n, mostrando Valencia."),this.addMarkers()}):this.addMarkers()}loadRestaurants(){this.restaurantService.getRestaurants().subscribe({next:t=>{this.restaurants=t,this.map&&this.addMarkers()},error:t=>console.error("Error al cargar restaurantes",t)})}addMarkers(){!this.map||!this.restaurants.length||this.restaurants.forEach(t=>{if(!t.lat||!t.lng)return;let o=new google.maps.Marker({position:{lat:t.lat,lng:t.lng},map:this.map,title:t.name}),n=new google.maps.InfoWindow({content:`
          <div>
            <h3>${t.name}</h3>
            <p>${t.address}</p>
            ${t.description?`<p>${t.description}</p>`:""}
            ${t.openingHours?`<p>Horario: ${t.openingHours}</p>`:""}
          </div>
        `});o.addListener("click",()=>n.open(this.map,o))})}};e.\u0275fac=function(o){return new(o||e)(l(k))},e.\u0275cmp=m({type:e,selectors:[["app-map"]],decls:6,vars:0,consts:[["color","primary"],["fullscreen",""],["id","map",2,"width","100%","height","100%"]],template:function(o,n){o&1&&(a(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),h(3,"Mapa de Restaurantes"),r()()(),a(4,"ion-content",1),d(5,"div",2),r())},dependencies:[u,w,f,M,v,I],styles:["#map[_ngcontent-%COMP%]{width:100%;height:100%}"]});let i=e;return i})();export{H as MapComponent};
